<!DOCTYPE html>
<html>

<head>
    <title>Dolores Park Experiment</title>
</head>

<body>
    <div id="example"></div>
    <script src="libs/three.min.js"></script>
    <script src="libs/StereoEffect.js"></script>
    <script src="libs/DeviceOrientationControls.js"></script>
    <script src="libs/OrbitControls.js"></script>
    <script type="text/javascript">
    var camera, scene, renderer, effect, controls, element, container;
    var vertices = [],
        colors = [],
        faces = [],
        geometry, material, mesh;

    init();

    function init() {
        renderer = new THREE.WebGLRenderer();
        element = renderer.domElement;
        container = document.getElementById('example');
        container.appendChild(element);

        effect = new THREE.StereoEffect(renderer);

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.window.innerHeight, 0.001, 700);
        camera.position.set(0, 10, 0);
        scene.add(camera);

        controls = new THREE.OrbitControls(camera, element);
        controls.rotateUp(Math.PI / 4);
        controls.target.set(
            camera.position.x + 0.1,
            camera.position.y,
            camera.position.z
        );
        controls.noZoom = true;
        controls.noPan = true;

        function setOrientationControls(e) {
            if (!e.alpha) {
                return;
            }

            controls = new THREE.DeviceOrientationControls(camera, true);
            controls.connect();
            controls.update();

            element.addEventListener('click', fullscreen, false);

            window.removeEventListener('deviceorientation', setOrientationControls, true);
        }
        window.addEventListener('deviceorientation', setOrientationControls, true);


        vertices.push(new THREE.Vector3(new THREE.Vector3(0, 0, 0)));
        colors.push(new THREE.Color(0xFF0000));

        vertices.push(new THREE.Vector3(new THREE.Vector3(0, 1, 0)));
        colors.push(new THREE.Color(0x00FF00));

        vertices.push(new THREE.Vector3(new THREE.Vector3(1, 1, 0)));
        colors.push(new THREE.Color(0x0000FF));

        // 0, 1 and 2 are the indices of the vertices in the vertices array
        faces.push(new THREE.Face3(0, 1, 2));

        geometry = new THREE.Geometry();
        geometry.vertices = vertices;
        geometry.faces = faces;
        geometry.vertexColors = colors;

        material = new THREE.MeshBasicMaterial({
            vertexColors: THREE.VertexColors
        });

        mesh = new THREE.Mesh(geometry, material);

        scene.add(mesh);
    }
    </script>
</body>

</html>
